\documentclass[lm-default]{l3doc}
\usepackage[scale=10pt]{char2path}
\usepackage{listings, hyperref}
\lstset{basicstyle = \footnotesize\ttfamily, numbers = left}

\usepackage[mono = false]{libertine}
\AddToHook{env/function/before}{\vspace*{-.7\baselineskip}}
\AddToHook{env/syntax/after}   {\par\vspace*{.2\baselineskip}}
\makeatletter
\def \@key  #1{\textcolor{red}{\textbf{\texttt{#1}}}\:\texttt{=}\:}
\def \s@key #1{\textcolor{red}{\textbf{\texttt{#1}}}}
\DeclareDocumentCommand \key s {\IfBooleanTF{#1}\s@key\@key}
\DeclareCommandCopy \val \meta
\def \TFF {true\textup{\textbar\textbf{false}}}
\def \TTF {\textup{\textbf{true}\textbar}false}
\def \HoLogo@ApLaTeX #1{^^A
  \HOLOGO@mbox {A\kern -.05em p\kern -.05em \hologo{LaTeX}}}
\newcounter{example}[subsection]
\renewcommand\theexample{\thesubsection.\arabic{example}}
\newwrite\example@out
\def\example@name{\jobname.example.aux}
\long\def\example@start{\begingroup\@bsphack
  \immediate\openout\example@out=\example@name
  \let\do\@makeother\dospecials\catcode`\^^M\active
  \def\verbatim@processline{\immediate\write\example@out{\the\verbatim@line}}^^A
  \verbatim@start}
\long\def\example@end{\immediate\closeout\example@out\@esphack\endgroup
  \trivlist\item[]\relax
    \leavevmode\hbox to \z@{^^A
      \hbox to \z@{\hss{\footnotesize[\theexample]}\hskip10pt}^^A
      \hskip\parindent
      \begin{minipage}[c]{.64\textwidth}^^A
        \small\verbatiminput \example@name^^A
      \end{minipage}^^A
      \fbox{^^A
        \begin{minipage}[c]{.36\textwidth}^^A
          \normalsize\input \example@name^^A
        \end{minipage}^^A
      }^^A
    \hss}^^A
  \endtrivlist}
\newenvironment{example}
  {\stepcounter{example}\example@start}{\example@end}
\makeatother
\newlist{keyval}{itemize}{10}
\setlist[keyval]{leftmargin = 0pt, labelsep = 0pt}
\makeindex

\title{^^A
  The \pkg{char2path} Package\thanks{^^A
    \url{https://github.com/zongpingding/char2path},
    \texttt{https://ctan.org/pkg/char2path}^^A
  }^^A
}
\author{^^A
  Eureka\thanks{^^A
    \href{mailto:<email>@<domain>}{\texttt{<email>@<domain>}}},~
  Mingyu Xia\thanks{^^A
    \href{mailto:xiamingyu@westlake.edu.cn}{\texttt{xiamingyu@westlake.edu.cn}}^^A
  }^^A
}
\date{Released 2025-08-dd\quad \texttt{v1.0.1}}

\begin{document}

\maketitle

\begin{documentation}

\section{Introduction}

The \pkg{char2path} package (conducted with \LaTeX3) provides
a \LaTeX\ package that converts characters into Ti\textit k\/Z paths.
It supports various compilation methods, such as \hologo{pdfLaTeX},
\hologo{XeLaTeX}, \hologo{ApLaTeX} (pending for check), \hologo{LuaLaTeX}, etc.

\section{Usage}

To load this package, write the line
\begin{quote}
  |\usepackage[scale = |\meta{int}|pt]{char2path}|
\end{quote}

Here, the integral number \meta{int} supports the following choices,
and the converted paths will be scaled to the corresponding factors.

\begin{center}
  \begin{tabular}{*9c}
    \toprule
    Pound   & |10pt|  & |11pt|  & |12pt|  &
    |13pt|  & |14pt|  & |15pt|  & |16pt|  & (Pending...)\\
    \midrule
    Factor  & |0.820| & |0.902| & |0.984| &
    |1.066| & |1.148| & |1.230| & |1.311| & ...\\
    \bottomrule
  \end{tabular}
\end{center}

\begin{function}{\chartopath}
  \begin{syntax}
    \cs{chartopath} \oarg{key-vals} \marg{string}
  \end{syntax}
  The mandatory argument accepts the required input string, and the optional
  argument accepts the following keys to set the style how the string converts
  to path.
  \begin{keyval}
    \item [\key{draw,fill}] \val{color} can set the color of the outline/fill of string
    (Default: |black|).
    \item [\key{scale}] \val{fp num} can set the scale of the string
    (Default: |1|).
    \item [\key{path fading}] \val{direction} can set the direction of
    fading of the string.
  \end{keyval}
\end{function}

\begin{function}{\charfading}
  \begin{syntax}
    \cs{chartopath} \oarg{key-vals} \marg{string}
  \end{syntax}
  The mandatory argument accepts the required input string, and the optional
  argument accepts the following keys to set the style how the string converts
  to path.
  \begin{keyval}
    \item [\key{colorset}] \val{clist} can set the two colors for fading
    \item [\key{direction}] \val{direction} can set the direction of fading
  \end{keyval}
\end{function}

\section{Examples}

This package could convert the following characters to path:
including \texttt{Latin Modern Mono} and \textrm{Latin Modern Roman}.

\DeleteShortVerb\| \DeleteShortVerb\"
\begin{example}
 \chartopath{!#$"\%&'()*+,-./01234567}
 \chartopath{89:;<=>?@ABCDEFGHIJKLMNO}
 \chartopath{PQRSTUVWXYZ[\ ]^_`abcdefg}
 \chartopath{hijklmnopqrstuvwxyz\{|\}~$}
\end{example}

\begin{example}
 \chartopath{!#$"\%&'()*+,-./01234567}[lmr]
 \chartopath{89:;<=>?@ABCDEFGHIJKLMNO}[lmr]
 \chartopath{PQRSTUVWXYZ[\ ]^_`abcdefg}[lmr]
 \chartopath{hijklmnopqrstuvwxyz\{|\}~$}[lmr]
\end{example}
\MakeShortVerb\| \MakeShortVerb\"

\subsection{Basic usage}

\noindent
The basic usage only print the outline of the inputted string.
\begin{example}
 \chartopath{0123456789}
\end{example}
\noindent
Users can pecific the color of outline and fill,
or specific the scale of inputted characters.
Just like the keys in \pkg{Ti\textit k\/Z}
\begin{example}
 \chartopath[draw = none, fill = blue]{0123456789}
\end{example}

\begin{example}
 \chartopath[draw = blue, fill = red]{0123456789}
\end{example}

\begin{example}
 \chartopath[draw = red, scale = 2]{0123456789}
\end{example}

Fading is also supported

\begin{example}
  \chartopath[draw = none, path fading = south,
              scale = 2, fill = teal]  {0123456789}
\end{example}
\begin{texnote}
  Fading will cost too much time !!!
\end{texnote}

as well as pattern

\begin{example}
  \chartopath[draw = black, pattern = north east lines,
              scale = 3]  {0123456789}
\end{example}

\subsection{Use in \pkg{listings}}

This package can be used in the \pkg{listings} package, so that users could
directly copy and paste the source code from |.pdf| file without worry about
including unwanted line numbers.

\let\orithelstnumber\thelstnumber
  \def\thelstnumber{%
    \chartopath[path fading = east, fill = blue]
       {\orithelstnumber}
  }
\begin{verbatim}
  \let\orithelstnumber\thelstnumber
  \def\thelstnumber{%
    \chartopath[path fading = east, fill = blue]
       {\orithelstnumber}
  }
\end{verbatim}

\begin{example}
\begin{lstlisting}[language = {[LaTeX]TeX}]
\documentclass{article}
\begin{document}
  Hello, \LaTeX!
\end{document}
\end{lstlisting}
\end{example}

% Test Indent???

% \newbox\ttt
% \sbox{\ttt}{\hbox{abc def}}
% \showbox\ttt

% \hskip1em 0123456789

% \noindent\hskip2em
% \chartopath[fill=teal]{0123456789}

\subsection{Use in text\texorpdfstring{\color{red}[Needs to Optimize]}{}}

Commands for changing font's size like |\small|,
|\Large| can be directly applied to \cs{chartopath}.
A comparison of the text and the path under 4 different font size commands
is shown in the following figure.

\begin{center}
  \begin{tikzpicture}[every node/.style = {font = \ttfamily}]
    \draw [ -stealth, gray!25, line width = 1em, line cap = round ]
      (0,0) --++ (.93\linewidth,0) node [ black ] {|\f@size|};
    \node [ above = 1ex ] at (.06\linewidth,0) {\small      0123456789};
    \node [ above = 1ex ] at (.24\linewidth,0) {\normalsize 0123456789};
    \node [ above = 1ex ] at (.45\linewidth,0) {\large      0123456789};
    \node [ above = 1ex ] at (.72\linewidth,0) {\huge       0123456789};
    \node [ below = 1ex ] at (.06\linewidth,0)
      {\small     \chartopath[fill = orange]{0123456789}};
    \node [ below  = 1ex] at (.24\linewidth,0)
      {\normalsize\chartopath[fill = green]{0123456789}};
    \node [ below = 1ex ] at (.45\linewidth,0)
      {\large     \chartopath[fill = blue]{0123456789}};
    \node [ below = 1ex ] at (.72\linewidth,0)
      {\huge      \chartopath[fill = purple]{0123456789}};
    \makeatletter
    \node at (.06\linewidth,0)
      {\small     \scalebox{\fpeval{8/\f@size}}
        {\small     \f@size pt (\cs[no-index]{small})}};
    \node at (.24\linewidth,0)
      {\normalsize\scalebox{\fpeval{8/\f@size}}
        {\normalsize\f@size pt (\cs[no-index]{normalsize})}};
    \node at (.45\linewidth,0)
      {\large     \scalebox{\fpeval{8/\f@size}}
        {\large     \f@size pt (\cs[no-index]{large})}};
    \node at (.72\linewidth,0)
      {\huge      \scalebox{\fpeval{8/\f@size}}
        {\huge      \f@size pt (\cs[no-index]{huge})}};
    \makeatother
  \end{tikzpicture}
\end{center}

\normalfont \normalsize

\subsection{Fading string}

If the users want to fading the whole strings, not fading one by one,
then use this module

\subsubsection{Discretely fading string}

\begin{example}
  \chartopath[path fading = east,
              fill = red]  {0123456789}
\end{example}

\begin{example}
  \chartopath[path fading = west,
              fill = red]  {0123456789}
\end{example}

\subsubsection{Continously fading string}

\indent

\begin{example}
  \charfading[colorset = {red, green},
              direction = horizontal] {0123456789}
\end{example}

\begin{example}
  \charfading[colorset = {violet, blue},
              direction = horizontal] {0123456789}
\end{example}

\begin{example}
  \charfading[colorset = {green, red},
              direction = horizontal] {0123456789}
\end{example}

\begin{example}
  \charfading[colorset = {blue, violet},
              direction = horizontal] {0123456789}
\end{example}

% \charfading[colorset = teal, direction = south]{20250721}

% \charfading[colorset = violet, direction = north]{20250721}

\section{Todo list}

\begin{itemize}
  \item [\textcolor{red}{\textsf{Enhanced}}] Baselines of some characters need to optimize.
  \item [\textcolor{red}{\textsf{Enhanced, Detail}}] The "mono font" doesn't
  appears mono: a fixed box should be applied.
  \item [\textcolor{red}{\textsf{Enhanced, Detail}}] Function: ``Use in text'' needs to optimize: reduce the deviation.
  Is |.054pt|, |\f@size/8.4| ... the best practice? Or should we use |minimum width|?
  \begin{verbatim}
  \cs_new_protected:Npn \@@_draw:nn #1#2
    {
      \tikz \node
        [ inner~sep = .054pt * \f@size ]%minimum~width = .7*\f@size (or 1ex?),
        { \tikz [ scale = \prop_item:Ne \c_@@_scale_prop { \g_@@_scale_tl } *
                          \fp_eval:n { \f@size/8.4 * \c_@@_global_scale_fp }
                ] \path [#1] #2;};
    }
  \end{verbatim}
  \item [\textcolor{green}{\textsf{Function}}] Merge the ``Fading string'' module (commmand) into \cs{chartopath}.
  \item [\textcolor{green}{\textsf{Function}}] "AutoFakeSlant".
\end{itemize}

\end{documentation}

\begin{implementation}

\end{implementation}

\PrintIndex

\end{document}
